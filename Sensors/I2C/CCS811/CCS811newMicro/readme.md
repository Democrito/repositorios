
I have made a new micro and I am testing it with different peripherals (this sensor is one of them). The new micro, like the previous one, is specially designed for the management of data packets for both I2C and SPI (and any other protocol, be it parallel or serial). What is new is that it has an external interrupt (the address of the interrupt jump is configurable from the Icestudio block itself). It allows sends of memory blocks (send only) of any size and to any address (as long as it is within 16 bits of addressing and what the FPGA memory allows). It allows executing a group of instructions repeatedly (as if it were a while, for, etc. loop). The unconditional jump has two functions here, like a simple BASIC "goto", but if a "return" statement is found it would return to the place where the goto left plus one more position (ie to the next statement after the goto); therefore the "goto" can also behave as a "gosub". Because it doesn't have a stack, it doesn't allow nested jumps.

About the circuit:

- When it starts, you have to wait about 10 seconds for the data to start coming out.
- Once data begins to output (CO2 and aromatic compounds), the data will be output every 5 seconds.
- If a reset is made to the FPGA, it is convenient to do a long reset (do not make a simple click) It is not for the FPGA but for the sensor.
- If we observe the signals with PulseView, when it reads the data, the first two bytes that come out are those of CO2, and the next 2 bytes are those of aromatic compounds. Later others come out that I still don't know what they are but I think the final couple of bytes are for temperature, but I think that a formula must be applied to the latter to convert them to degrees (and it's not because they are in Fahrenheit degrees, but because they have a own formula).
- The CSS811 has a pin called WAK, this pin must be grounded. This is very important to keep in mind, otherwise it will not work.
- You have to put resistors in "pull-up" configuration. I need to know how to configure the outputs so that it is not necessary to put them.
- This new micro (Atto64K) can address a memory of up to 64K, however I have limited the memory to 2K. The code of the instructions has changed with respect to its previous version (pending documentation of this part). The micro allows you to make unconditional jumps and also with returns (like BASIC's "gosub-return") but it lacks a stack, therefore they are not chainable.

Important note: As of toolchain version 8.0, the inputs to the air are not considered zero and they are not synthesized (they are almost always counter resets to the air). It would take me a long time to correct all the circuits with this condition, but if you want this circuit corrected, let me know and I'll send it to you corrected and upload it here also corrected. Anyway little by little I will correct this new condition.
